// Decompiled with JetBrains decompiler
// Type: Terra.CoherentNoise.Generation.GradientNoise2D
// Assembly: Assembly-CSharp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 2DEADBA5-E10A-4E88-A1ED-0D4DF3F1CF20
// Assembly location: E:\sw_games\build11_0\Bitch Land_Data\Managed\Assembly-CSharp.dll

using Terra.CoherentNoise.Interpolation;
using UnityEngine;

#nullable disable
namespace Terra.CoherentNoise.Generation
{
  public class GradientNoise2D : Generator
  {
    private static readonly float[] Vectors = new float[512]
    {
      -0.731431365f,
      0.6819151f,
      0.850826263f,
      -0.52544713f,
      0.9519012f,
      -0.3064052f,
      0.8473753f,
      -0.5309945f,
      0.8486523f,
      0.5289511f,
      0.3670395f,
      0.930205345f,
      0.993031263f,
      -0.117851295f,
      -0.6711514f,
      -0.7413203f,
      -0.520675063f,
      -0.853754938f,
      0.7974536f,
      -0.603380263f,
      0.261253744f,
      0.965270162f,
      -0.466543436f,
      0.8844983f,
      0.988416255f,
      -0.151767254f,
      0.2433936f,
      0.9699276f,
      0.366768837f,
      -0.9303121f,
      0.4112987f,
      -0.911500633f,
      0.207341015f,
      -0.978268743f,
      -0.7385464f,
      0.6742027f,
      -0.3946546f,
      -0.91882956f,
      -0.571211636f,
      0.8208028f,
      -0.3228229f,
      -0.9464594f,
      0.2972909f,
      -0.954786956f,
      0.9554582f,
      -0.295126438f,
      0.144935578f,
      0.9894411f,
      -0.472190231f,
      0.881496668f,
      -0.999147654f,
      -0.04127912f,
      -0.05660392f,
      -0.9983967f,
      0.838467538f,
      0.544951558f,
      0.748568f,
      -0.663058f,
      -0.527875841f,
      0.849321544f,
      0.3576999f,
      0.9338366f,
      0.3492216f,
      -0.93704015f,
      0.9892384f,
      0.146312669f,
      0.333538115f,
      -0.9427366f,
      0.23435384f,
      0.972151339f,
      0.6276515f,
      0.7784944f,
      -0.179494351f,
      0.983759f,
      -0.6597808f,
      0.7514581f,
      -0.71841526f,
      -0.695614457f,
      -0.9980339f,
      -0.06267691f,
      0.6730685f,
      -0.739580154f,
      -0.7393507f,
      0.6733206f,
      -0.9332715f,
      0.359171569f,
      -0.662381947f,
      0.7491663f,
      -0.08013663f,
      -0.9967839f,
      0.290253848f,
      -0.9569497f,
      -0.540329158f,
      -0.841453731f,
      -0.6923445f,
      -0.721567154f,
      -0.8871599f,
      0.4614622f,
      -0.991828144f,
      0.127581045f,
      0.0810979158f,
      -0.9967061f,
      -0.5391988f,
      0.8421785f,
      0.969429433f,
      0.245370358f,
      0.9557809f,
      0.2940796f,
      0.80678153f,
      0.5908499f,
      -0.8685315f,
      -0.49563396f,
      0.96800226f,
      -0.250941455f,
      -0.165205538f,
      -0.986259162f,
      -0.8681922f,
      -0.496228069f,
      -0.8697636f,
      -0.493468642f,
      -0.949489832f,
      0.313797772f,
      0.7684012f,
      -0.639968455f,
      -0.010864093f,
      -0.999941f,
      -0.450260669f,
      0.8928972f,
      -0.2782095f,
      -0.9605204f,
      -0.813261449f,
      0.581898451f,
      -0.332109362f,
      0.9432409f,
      0.472751021f,
      0.881196f,
      0.999956667f,
      -0.009309157f,
      -0.494039774f,
      -0.8694393f,
      -0.970522761f,
      -0.2410096f,
      -0.871927559f,
      0.489634842f,
      0.0615978837f,
      -0.998101056f,
      0.45146805f,
      0.8922873f,
      -0.991514f,
      0.129999787f,
      -0.39859125f,
      0.9171287f,
      -0.620385468f,
      0.784297049f,
      -0.853977f,
      -0.5203107f,
      -0.9978736f,
      0.0651789755f,
      -0.980603f,
      -0.1960045f,
      0.5746031f,
      -0.8184322f,
      0.7595997f,
      0.6503909f,
      -0.4923802f,
      -0.8703802f,
      -0.8270445f,
      0.562136531f,
      -0.8893336f,
      -0.45725888f,
      0.5935857f,
      -0.804770768f,
      0.108623795f,
      -0.9940829f,
      0.988522768f,
      -0.151071981f,
      -0.287923425f,
      -0.957653463f,
      -0.6853749f,
      -0.728190362f,
      0.412211567f,
      0.911088169f,
      -0.9405879f,
      -0.339550376f,
      0.199921951f,
      -0.979811847f,
      0.9681154f,
      0.250504732f,
      0.927955151f,
      0.3726919f,
      0.9904946f,
      -0.13755165f,
      -0.665248454f,
      -0.746622f,
      0.7409187f,
      0.6715947f,
      -0.5353086f,
      -0.8446566f,
      -0.514854968f,
      0.8572773f,
      -0.9990301f,
      0.04403266f,
      -0.996926844f,
      0.07833782f,
      -0.6855973f,
      -0.727981031f,
      0.0370788872f,
      -0.999312341f,
      0.9318435f,
      -0.3628604f,
      -0.5587336f,
      0.8293472f,
      -0.873792768f,
      -0.486298472f,
      0.6566073f,
      -0.754232645f,
      -0.9094399f,
      -0.415835381f,
      0.220309287f,
      -0.9754301f,
      0.150100052f,
      0.9886708f,
      -0.6960842f,
      0.7179602f,
      0.10057088f,
      0.9949299f,
      0.948614836f,
      0.316433161f,
      -0.09589822f,
      -0.99539113f,
      -0.5171409f,
      0.8559003f,
      0.178670332f,
      0.983909f,
      -0.5531182f,
      0.833102763f,
      -0.007853216f,
      -0.9999692f,
      0.6078575f,
      -0.7940461f,
      -0.666794837f,
      -0.745241344f,
      -0.470794946f,
      0.8822427f,
      -0.9799965f,
      0.199014679f,
      -0.6785664f,
      0.7345391f,
      -0.99578476f,
      0.09172084f,
      0.9946968f,
      -0.102850661f,
      -0.654067457f,
      -0.7564362f,
      -0.190395162f,
      -0.9817075f,
      0.751490355f,
      0.6597441f,
      -0.999971f,
      -0.007620303f,
      -0.419586271f,
      -0.90771544f,
      0.06707456f,
      0.997747958f,
      0.8966251f,
      -0.442790538f,
      0.569636643f,
      0.8218967f,
      0.9710213f,
      0.238992944f,
      -0.636951447f,
      0.7709039f,
      -0.9942517f,
      0.107067853f,
      0.8515248f,
      -0.524314344f,
      -0.9746531f,
      0.223721564f,
      0.117674172f,
      0.993052244f,
      -0.127312139f,
      0.9918627f,
      0.821092963f,
      -0.570794463f,
      -0.836181f,
      0.5484536f,
      0.8706918f,
      -0.4918291f,
      -0.822815359f,
      0.5683088f,
      0.367191076f,
      -0.930145562f,
      -0.432424575f,
      0.9016701f,
      -0.120396018f,
      -0.992725968f,
      -0.3421907f,
      0.9396305f,
      -0.16089651f,
      -0.986971259f,
      0.04163368f,
      -0.999132931f,
      -0.254051834f,
      0.9671906f,
      -0.6773926f,
      0.7356217f,
      0.3453049f,
      -0.93849057f,
      -0.295575827f,
      -0.9553193f,
      0.5091858f,
      0.8606566f,
      0.9925752f,
      0.121632285f,
      -0.06950722f,
      0.9975814f,
      -0.128580362f,
      0.9916991f,
      0.9642222f,
      -0.265095353f,
      -0.261898816f,
      -0.965095341f,
      0.6437688f,
      -0.765220046f,
      -0.004166558f,
      -0.9999913f,
      0.9125823f,
      0.4088931f,
      0.7929742f,
      0.6092552f,
      0.9965122f,
      -0.08344737f,
      -0.9420325f,
      0.3355216f,
      0.8750184f,
      0.484089643f,
      0.9967505f,
      0.08055109f,
      -0.7062684f,
      0.707944155f,
      0.605807662f,
      -0.795611143f,
      -0.363735378f,
      0.931502342f,
      0.725481451f,
      -0.6882417f,
      -0.9939458f,
      -0.109871887f,
      -0.864972353f,
      -0.5018195f,
      -0.122120976f,
      -0.9925152f,
      0.877539f,
      -0.47950533f,
      -0.9511561f,
      -0.308710366f,
      0.975779831f,
      -0.218754843f,
      -0.450957f,
      -0.8925457f,
      -0.5228687f,
      -0.852413237f,
      0.829681f,
      -0.558237851f,
      -0.8572909f,
      0.5148323f,
      -0.772060633f,
      0.63554883f,
      -0.0340187736f,
      -0.9994212f,
      -0.7713372f,
      0.6364267f,
      0.688529253f,
      -0.7252086f,
      0.725163758f,
      0.68857646f,
      -0.953544557f,
      0.301252067f,
      0.7001211f,
      -0.714024067f,
      -0.5384554f,
      0.842654f,
      0.175916567f,
      0.9844051f,
      -0.6294514f,
      -0.7770398f,
      -0.9990897f,
      -0.04265872f,
      -0.9892088f,
      -0.1465124f,
      -0.8409528f,
      0.5411084f,
      0.5673684f,
      0.8234641f,
      -0.538825035f,
      0.8424177f,
      0.390786648f,
      -0.920481265f,
      -0.8673694f,
      0.497664839f,
      -0.65798986f,
      0.7530268f,
      0.0581097f,
      0.9983102f,
      -0.199969947f,
      -0.979802f,
      0.906884432f,
      -0.421379417f,
      0.687773f,
      -0.7259258f,
      -0.9458383f,
      0.324638128f,
      -0.8499708f,
      0.5268298f,
      0.592467368f,
      -0.805594444f,
      0.172273681f,
      0.9850491f,
      0.9842649f,
      -0.176699f,
      0.0341409557f,
      0.999417f,
      -0.98164314f,
      0.190726981f,
      -0.286049515f,
      0.9582148f,
      -0.82715255f,
      -0.5619775f,
      -0.278190821f,
      0.9605258f,
      0.3214603f,
      -0.9469231f,
      -0.945857167f,
      0.3245832f,
      -0.6323265f,
      0.774702f,
      -0.439701349f,
      0.898144066f,
      -0.2239042f,
      -0.974611163f,
      0.746644557f,
      0.665223241f,
      -0.452095568f,
      0.8919695f,
      -0.688536048f,
      -0.725202143f,
      0.6403307f,
      0.768099368f,
      0.976846039f,
      0.213943511f,
      -0.676632047f,
      -0.73632133f,
      -0.494860649f,
      -0.868972361f,
      -0.6954616f,
      0.7185633f,
      0.9993175f,
      -0.0369391367f,
      0.455862164f,
      0.8900504f,
      -0.8865882f,
      -0.4625595f,
      -0.8767837f,
      -0.48088488f,
      -0.08753698f,
      -0.9961613f,
      -0.9552282f,
      -0.295870066f,
      -0.375385672f,
      0.9268687f,
      -0.8813566f,
      0.4724517f,
      0.381051332f,
      0.9245539f,
      -0.994403541f,
      0.105648659f,
      -0.9923638f,
      -0.123345412f,
      -0.292273968f,
      0.956334651f,
      0.990902662f,
      -0.134580716f,
      0.992155135f,
      0.125012964f,
      0.803208232f,
      -0.595698357f,
      -0.9917714f,
      0.128021464f,
      -0.689705f,
      -0.724090457f,
      0.6892879f,
      -0.7244875f,
      0.8929507f,
      -0.450154454f,
      0.95733124f,
      0.288992941f,
      0.23696278f,
      0.971518755f,
      -0.1792554f,
      -0.983802557f,
      0.9710559f,
      -0.238852143f,
      0.279177248f,
      -0.9602396f,
      0.9935345f,
      0.1135303f,
      0.8096126f,
      0.586964667f,
      -0.31655845f,
      0.948573f,
      0.969151258f,
      0.246466815f
    };
    private readonly int m_Seed;
    private readonly SCurve m_SCurve;

    public GradientNoise2D(int seed)
      : this(seed, (SCurve) null)
    {
    }

    public GradientNoise2D(int seed, SCurve sCurve)
    {
      this.m_Seed = seed;
      this.m_SCurve = sCurve;
    }

    public int Period { get; set; }

    private SCurve SCurve => this.m_SCurve ?? SCurve.Default;

    public override float GetValue(float x, float y, float z)
    {
      int ix = Mathf.FloorToInt(x);
      int iy = Mathf.FloorToInt(y);
      float t1 = this.SCurve.Interpolate(x - (float) ix);
      float t2 = this.SCurve.Interpolate(y - (float) iy);
      return Mathf.Lerp(Mathf.Lerp(this.GetNoise(x, y, ix, iy), this.GetNoise(x, y, ix + 1, iy), t1), Mathf.Lerp(this.GetNoise(x, y, ix, iy + 1), this.GetNoise(x, y, ix + 1, iy + 1), t1), t2);
    }

    private Vector2 GetRandomVector(int x, int y)
    {
      if (this.Period > 0)
      {
        x %= this.Period;
        if (x < 0)
          x += this.Period;
        y %= this.Period;
        if (y < 0)
          y += this.Period;
      }
      int num = 1619 * x + 31337 * y + 1013 * this.m_Seed & int.MaxValue;
      int index = ((num >> 8 ^ num) & (int) byte.MaxValue) * 2;
      return new Vector2(GradientNoise2D.Vectors[index], GradientNoise2D.Vectors[index + 1]);
    }

    private float GetNoise(float x, float y, int ix, int iy)
    {
      return Vector2.Dot(this.GetRandomVector(ix, iy), new Vector2(x - (float) ix, y - (float) iy)) * 2.12f;
    }
  }
}
